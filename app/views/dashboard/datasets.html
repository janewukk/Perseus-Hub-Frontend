{% extends 'dashboard/base.html' %}

{% block tabstyles %}
<style type="text/css">
	.panel {
		margin-top: 20px;
	}
	.recent-view {
		margin-top: 20px;
		border-right: 1px solid #f5f5f5;
	}
	.recent-view #search-field {
		margin-bottom: 20px;
	}
	.recent-view .list-group {
		height: 80vh;
		overflow-y: scroll;
	}
	.recent-view .list-group .content {
		width: 80%;
		display: inline;
	}
	.recent-view .list-group .btn {
		float : right;
	}
</style>
{% endblock %}

{% block tabs %}
<li class="active">
	<a data-toggle="collapse" href="#dataset-sections" 
		aria-expanded="false" 
		aria-controls="dataset-sections">
		Datasets
	</a>
	<ul class="collapse nav" id="dataset-sections">
		<li><a href="/dashboard/">Public datasets</a></li>
		<li><a href="/dashboard/?my">My Datasets</a></li>
	</ul>
</li>
<li><a href="/bookmarks/">Bookmarked</a></li>
<li><a href="/upload/">Upload data file</a></li>
{% endblock %}

{% block tabdetails %}
<div class="row">
	<div class="col-xs-12 col-sm-6 col-md-4 recent-view">
		{% if messages %}
			{% for message in messages %}
				<div class="alert alert-{{ message.tags }} alert-dismissible" role="alert" style="margin-top:10px;">
					<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
					{{ message }}
				</div>
			{% endfor %}
		{% endif %}
		<input type="text" id="search-field" class="form-control" placeholder="Search for dataset">
		<ul class="list-group">
			<li class="list-group-item clearfix">
				<button class="btn btn-primary btn-sm">View</button>
				<div class="content">
					<h4 class="list-group-item-heading">Phone number linked nodes</h4>
	    			<p class="list-group-item-text">uploaded by 
	    				<a href="mailto:example@example.org">example@example.org</a>
	    			</p>
				</div>
			</li>
		</ul>
	</div>
</div>
{% endblock %}

{% block scripts %}
<script type="text/javascript">
	// search action
	$('#search-field').keyup(function() {
		// extract current val
		var query = $(this).val();
		// send search request
		http.post('/search/', {
			query : query
		}).then(function() {
			// TODO: Fill the template with data
		}).catch(function() {
			console.log("SEARCH ERROR!");
		});
	});
</script>
{% endblock scripts %}